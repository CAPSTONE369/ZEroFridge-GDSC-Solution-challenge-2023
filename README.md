
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)


<p align="center">
  <br>
  <img src="https://capsule-render.vercel.app/api?type=transparent&height=300&section=header&text=ZEF%20:%20ZEro%20Fridge&animation=fadeIn&fontSize=90&fontColor=516FB4" />
  <br>
</p>



## content
1. [Demo Video](#demo-video) 
2. [ZEF](#zef)
3. [Implementation](#implementation)
4. [How to Install](#how-to-install) 
5. [Credit](#credit)
6. [Reference](#reference)

## Demo video



## ZEF

### Care your Fridge, take your future. 


#### Increasing food waste in single-person households due to major issues after 2020
In Korean society, food waste is mostly emitted at home. However, after COVID-19, time spent at home rapidly increased due to telecommuting and non-face-to-face activities, which had a significant impact on food waste along with the generalization of food delivery and take-out culture.  In addition, animal feed recycled with food waste, which currently accounts for the largest stake in the Korean food waste recycling structure, has been cited as the cause of African swine fever, limiting the market.
As a result, there are growing calls to reduce food waste itself. In particular, among the four methods of discharging household food waste in Korea, the method of using a Food Waste Bag is discharged more than other methods, and this method is usually used in single-person households. The proportion of single-person households in South Korea rose to 33.4 percent in 2021 from 15.5 percent in 2000, in contrast to a drop in the proportion of four-person households to 14.7 percent from 31.1 percent during the same period. Considering this trend, the problem of food waste arising from single-person households is expected to become more important in the future.

#### inspired by two campaigns and a change that begins with "me"
We have inspired this project by the Zero Waste, Zero Hunger campaign, and Plan Drawdown. It shocked us that around the world, food waste is handled by around 8 percent of total anthropogenic greenhouse gas emissions every year and that most of the food waste comes from the household. The issue of food waste in Korea is relatively less emphasized than other climate crises. Since the settlement of the pay-as-you-go emission system more than a decade ago, the issue has received little attention. Our team also lives in a single-person household, but no one actually knows how much food waste they throw away every month. Therefore, I wanted to guide individuals' practical actions, not only to emphasize fear and crisis in the climate crisis. It aims to encourage individuals to reduce food waste by reminding them of the climate behaviors and effects that individuals can practice in their daily lives.


#### Looking for futher information for Zero Waste & Zero Hunger?  
https://drawdown.org

https://ko.wfp.org/zwzh

### Screenshots

<table border="1" cellspacing="0" cellpadding="0" width="90%">
    <tr width="100%">
        <td width="20%" align="center">Registeration food list</a></td>
        <td width="20%" align="center">sharing the fridge</a></td>
        <td width="20%" align="center">zero waste recipt</a></td>
    </tr>
    <tr width="100%">
        <td width="20%" align="center"><img src = "https://user-images.githubusercontent.com/80109963/228923679-d18a1744-c611-4fac-8ecd-fc8240b6759d.png"></td>
        <td width="20%" align="center"><img src = "https://user-images.githubusercontent.com/80109963/228923853-1a696e1b-152b-4e27-b00d-b3a84c39a7bd.png"/></td>
        <td width="20%" align="center"><img src = "https://user-images.githubusercontent.com/80109963/228923381-35e0dd2e-f9a6-4e99-b7aa-6284eba5ccb5.png" /></td>
    </tr>
    <tr width="100%">
        <td width="20%" align="center">Users can automatically register food by taking pictures of receipts</a></td>
        <td width="20%" align="center">sharing refrigerators with others.</a></td>
        <td width="20%" align="center">Among registered foods, food consumed and non-consumed foods are tracked by month and shown.</a></td>
    </tr>
</table>

### Future update: Introduce a use-by-date
Show the guide on the difference between Sell-by-date and use by date while running the app.


## Implementation

![image](https://user-images.githubusercontent.com/80109963/228924300-1284e9f7-22ad-4e0a-a913-7bb88a523d6c.png)


- Google

&nbsp;
<img alt="Flutter" src ="https://img.shields.io/badge/Flutter-02569B.svg?&style=for-the-badge&logo=Flutter&logoColor=white"/> 
<img alt="Google Cloud" src ="https://img.shields.io/badge/Google Cloud-4285F4.svg?&style=for-the-badge&logo=Google Cloud&logoColor=white"/> 
<img alt="Google Colab" src ="https://img.shields.io/badge/Google Colab-F9AB00.svg?&style=for-the-badge&logo=Google Colab&logoColor=white"/>

- AWS
  
&nbsp;
<img alt="Amazon AWS" src ="https://img.shields.io/badge/AWS-232F3E.svg?&style=for-the-badge&logo=Amazon AWS&logoColor=white"/>
<img alt="Amazon RDS" src ="https://img.shields.io/badge/AWS RDS-527FFF.svg?&style=for-the-badge&logo=Amazon RDS&logoColor=white"/>
<img alt="Amazon EC2" src ="https://img.shields.io/badge/AWS EC2-FF9900.svg?&style=for-the-badge&logo=Amazon EC2&logoColor=white"/>
<img alt="Amazon S3" src ="https://img.shields.io/badge/AWS S3-569A31.svg?&style=for-the-badge&logo=Amazon S3&logoColor=white"/>

- Develop
 
&nbsp;
<img alt="Spring" src ="https://img.shields.io/badge/Spring-6DB33F.svg?&style=for-the-badge&logo=Spring&logoColor=white"/> 
<img alt="Spring Boot" src ="https://img.shields.io/badge/Spring Boot-6DB33F.svg?&style=for-the-badge&logo=Spring Boot&logoColor=white"/> 
<img alt="MySQL" src ="https://img.shields.io/badge/MySQL-4479A1.svg?&style=for-the-badge&logo=MySQL&logoColor=white"/>
<img alt="Kakao" src ="https://img.shields.io/badge/Kakao-FFCD00.svg?&style=for-the-badge&logo=KakaoTalk&logoColor=white"/> 
<img alt="Naver" src ="https://img.shields.io/badge/Naver-03C75A.svg?&style=for-the-badge&logo=Naver&logoColor=white"/>
  
- OCR
  
&nbsp; 
<img alt="MLflow" src ="https://img.shields.io/badge/MLflow-0194E2.svg?&style=for-the-badge&logo=MLflow&logoColor=white"/>
<img alt="PyTorch" src ="https://img.shields.io/badge/PyTorch-EE4C2C.svg?&style=for-the-badge&logo=PyTorch&logoColor=white"/>
<img alt="Flask" src ="https://img.shields.io/badge/Flask-000000.svg?&style=for-the-badge&logo=Flask&logoColor=white"/>

### Challenges
[The problem was deploying OCR model as a rest API with flask] 

The model is perfectly optimized to recognize food name on receipt written in Korean, but the volume was so big. To deploy the model as SaaS, we have to solve some problems. First, the model depends on a lot of libraries, so concerned with version conflict between those. Second, if only one library doesn’t work well, all the model’s code cannot be run.  Third, most critically,  we cannot be convinced that the model can be run regardless of the computer environment. All problem was related to huge size of model and sticky connection of dependencies.

[The solution was simple and the best, docker]

We adjust the libraries’ version carefully to build a docker image with the OCR model and flask server. After modifying the libraries’ version, we build docker image successfully and the image works well in the docker container. We succeeded to run the model with docker on Ubuntu, Mac, and Window regardless of OS version. By using docker, we solved all conflicts generated by big sized and dependencies.

[The last problem with deploying was that it only runs based on GPU] 
 
 Although we use docker and solved environmental problems completely, it remains that the model needs GPU. So if the user wants to test the model without GPU, it doesn’t work. To solve this problem, we build the model based on CPU. It is little bit slow but works very well only using CPU. So we addressed the challenge thoroughly.

## How to Install
### ZEF-CLIENT
**1. Install Flutter**
- You can install flutter with official document of Flutter.
- Follow step by step.
- [Link - Install Flutter](https://flutter-ko.dev/docs/get-started/install)
<br />

**2. You can launch this Demo Application on any devices(emulator), but we recommand use:**
IPHONE 12 Pro / over (v.) iOS 15

<br />

**3. Type below scripts in the command prompt(or Bash)**

```bash
cd {root directory of this proejct}
flutter doctor
flutter pub get
flutter run
```
### ZEF-SERVER
_**HOW TO INSTALL DOCKER?**_
- Ubuntu
```bash
sudo apt update
sudo apt install docker.io
```

- Mac, Window
> Use Docker Desktop.
  [YOU CAN INSTALL HERE](https://www.docker.com/products/docker-desktop/)

<br />

**2. Installation: HOW TO RUN?**
1) Pull Docker Image
```bash
sudo docker pull sunnyineverywhere/fridge-api-springboot
```
2) Launch Docker Image In Conatainer
```bash
sudo docker run -d -p 8080:8080 sunnyineverywhere/fridge-api-springboot
```

### ZEF-OCR
_**HOW TO INSTALL DOCKER?**_
- Ubuntu
```bash
sudo apt update
sudo apt install docker.io
```

- Mac, Window
> Use Docker Desktop.
  [YOU CAN INSTALL HERE](https://www.docker.com/products/docker-desktop/)

<br />

**2-1. Installation - GPU**
1) Pull Docker Image
```bash
sudo docker pull sunnyineverywhere/fridge-ocr-flask
```

2) Usage
You can test the OCR demonstration on your recipt image by running the `Flask` api.
```bash
sudo docker run -d -p 5000:5000 sunnyineverywhere/fridge-ocr-flask
```

<br />

**2-2. Installation - CPU**
1) Pull Docker Image
```bash
sudo docker pull sunnyineverywhere/fridge-ocr-flask-cpu
```

2) Usage
You can test the OCR demonstration on your recipt image by running the `Flask` api.
```bash
sudo docker run -d -p 5000:5000 sunnyineverywhere/fridge-ocr-flask-cpu
```

<br />

> - The demo is available in `localhost:5000/model` if you wish to test the result via `Postman`.
> - The demo is available in `localhost:5000/demo` if you wish to test the result by uploading the image via web.


## Credit
<table border="1" cellspacing="0" cellpadding="0" width="90%">
    <tr width="100%">
        <td width="20%" align="center"><a href= "https://github.com/yhjune">Hyojung Yoon</a></td>
        <td width="20%" align="center"><a href= "https://github.com/sunnyineverywhere">이선의</a></td>
        <td width="20%" align="center"><a href= "https://github.com/penguin1109">이지혜</a></td>
    </tr>
    <tr width="100%">
        <td width="20%" align="center"><img src = "https://github.com/yhjune.png"></td>
        <td width="20%" align="center"><img src = "https://github.com/sunnyineverywhere.png"/></td>
        <td width="20%" align="center"><img src = "https://github.com/penguin1109.png"/></td>
    </tr>
    <tr width="100%">
        <td width="20%" align="center">client, server, product degisn </td>
        <td width="20%" align="center">client, server, Dev&ML Ops </td>
        <td width="20%" align="center">OCR</td>
   </tr>
</table>


## Reference
- Scene Text Detection with Polygon Offsetting and Border Augmentation

2020.1.8 발행
학술지: MDPI
논문 저자: Thananop Kobchaisawat, Thanarat H. Chalidabhongse, Shin’ichi Satoh 

- Detecting Text in Natural Image with Connectionist Text Proposal Network

2016.9.16 발행
학술지: CVPR
논문 저자: Zhi Tian, Weilin Huang, Tong He, Pan He, Yu Qiao

- what is wrong with scene text recognition model comparisons? datasets and model analysis

2019.12.18 발행
학술지: CVPR
논문 저자: Jeonghun Baek, Geewook Kim, Junyeop Lee, Sungrae Park, Dongyoon Han, Sangdoo Yun, Seong Joon Oh, Hwalsuk Lee

- Character decomposition to resolve class imbalance problem in Hangul OCR

2022.9.28 발행
학술지: CVPR
논문 저자: Geonuk Kim, Jaemin Son, Kanghyu Lee, Jaesik Min

- What Is Wrong With Scene Text Recognition Model Comparisons? Dataset and Model Analysis

2019.4.3 발행
학술지: ICCV
논문 저자: Jeonghun Baek, Geewook Kim, Junyeop Lee, Sungrae Park, Dongyoon Han, Sangdoo Yun, Seong Joon Oh, Hwalsuk Lee

[2022 식품소비행태조사 결과 발표 대회](https://www.krei.re.kr/foodSurvey/index.do#)



